@model PagedList.IPagedList<MVCProject.Models.Location>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Danh sách vùng";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string size = Request.QueryString["size"];
    if (size == null || size == "") { size = "10"; }

    List<string> roles = (List<string>)ViewData["AccessList"];
}

<h2>@ViewBag.Title</h2>
@using (Html.BeginForm("Index", "Location", FormMethod.Get, new { id = "productViewForm" }))
{

    <p>
        @if (roles.Contains("23"))
        {
            @Html.ActionLink("Thêm mới", "Create")
        }
    </p>
@Html.PagedListPager(Model, page => Url.Action("Index", new
{
    page,
    order = ViewBag.Order,
    filter = ViewBag.Filter,
    size = size
}))
<table class="table">
    <tr>
        <td align="right" width="10%">
            Tên vùng:
        </td>
        <td align="left" width="18%">
            <input class="form-control" type="text" name="filter" id="filter" value="@Request.QueryString["filter"]" />
        </td>
        <td align="right" width="7%">
            Số dòng:
        </td>
        <td align="left" width="7%">
            <select class="form-control" name="size" id="size" onchange="productViewForm.submit();">
                @for (int s = 10; s <= 50; s += 10)
                {
                    <option value="@s" @if (size == s.ToString()) { @Html.Raw("selected='selected'")    }>@s</option>
                }
            </select>
        </td>
        <td align="right" width="10%">
            &nbsp;
        </td>
        <td align="left" width="18%">
            &nbsp;
        </td>
    </tr>
</table>
<table class="table">
    <tr>
        <th>
            Tên vùng
        </th>
        <th>
            Mã vùng
        </th>
        <th>
            Thứ tự
        </th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @if (roles.Contains("24"))
            {
                @Html.ActionLink(item.LocationName, "Edit", new { id = item.ID })
            }
            else
            {
                @item.LocationName
            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LocationCode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Order)
        </td>
    </tr>
}

</table>
}
